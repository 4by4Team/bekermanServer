generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

enum Role {
  USER
  ADMIN
}
model User{
  id         Int      @id @default(autoincrement())
  firstName  String
  lastName   String
  email      String   @unique
  phone      String
  tz         String
  password   String
  role       Role     @default(USER)
  createdAt  DateTime @default(now())
  updatedAt  DateTime @updatedAt
  applicants Applicant[]
}
model Applicant {
  id         Int      @id @default(autoincrement())
  userId     Int
  courseId   Int
  status     ApplicationStatus @default(PENDING)
  appliedAt  DateTime @default(now())
  updatedAt  DateTime          @updatedAt
  user       User     @relation(fields: [userId], references: [id])
  course     Course   @relation(fields: [courseId], references: [id])
}

enum ApplicationStatus {
  PENDING
  APPROVED
  REJECTED
}

model Course {
  id            Int        @id @default(autoincrement())
  title         String
  description   String
  price         Float
  linkToCourse  String
  backgroundUrl String
  students      Int        @default(0)
  createdBy     String
  updatedBy     String?
  createdAt     DateTime   @default(now())
  updatedAt     DateTime   @updatedAt
  applicants    Applicant[]
}

model Category {
  id           Int       @id @default(autoincrement())
  categoryName String
  count        Int       @default(0)
  createdBy    String
  updatedBy    String?
  createdAt    DateTime  @default(now())
  updatedAt    DateTime  @updatedAt
  articles     Article[]
}

model Article {
  id            Int       @id @default(autoincrement())
  title         String
  backgroundUrl String
  content       String
  readTime      Int
  categoryId    Int
  category      Category  @relation(fields: [categoryId], references: [id])
  createdBy     String
  updatedBy     String?
  createdAt     DateTime  @default(now())
  updatedAt     DateTime  @updatedAt
}

model Testimony {
  id         Int      @id @default(autoincrement())
  title      String
  summary    String
  youtubeId  String
  createdBy  String?
  updatedBy  String?
  createdAt  DateTime @default(now())
  updatedAt  DateTime @updatedAt
}
